"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2836],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>f});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=a.createContext({}),s=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=s(e.components);return a.createElement(l.Provider,{value:n},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(t),d=o,f=u["".concat(l,".").concat(d)]||u[d]||m[d]||r;return t?a.createElement(f,i(i({ref:n},c),{},{components:t})):a.createElement(f,i({ref:n},c))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=d;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p[u]="string"==typeof e?e:o,i[1]=p;for(var s=2;s<r;s++)i[s]=t[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},85162:(e,n,t)=>{t.d(n,{Z:()=>i});var a=t(67294),o=t(34334);const r={tabItem:"tabItem_Ymn6"};function i(e){var n=e.children,t=e.hidden,i=e.className;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(r.tabItem,i),hidden:t},n)}},74866:(e,n,t)=>{t.d(n,{Z:()=>N});var a=t(87462),o=t(67294),r=t(34334),i=t(12466),p=t(16550),l=t(91980),s=t(67392),c=t(50012);function u(e){return function(e){var n,t;return null!=(n=null==(t=o.Children.map(e,(function(e){if(!e||(0,o.isValidElement)(e)&&(n=e.props)&&"object"==typeof n&&"value"in n)return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?n:[]}(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}function m(e){var n=e.values,t=e.children;return(0,o.useMemo)((function(){var e=null!=n?n:u(t);return function(e){var n=(0,s.l)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function d(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function f(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId,r=(0,p.k6)(),i=function(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:t,groupId:a});return[(0,l._X)(i),(0,o.useCallback)((function(e){if(i){var n=new URLSearchParams(r.location.search);n.set(i,e),r.replace(Object.assign({},r.location,{search:n.toString()}))}}),[i,r])]}function y(e){var n,t,a,r,i=e.defaultValue,p=e.queryString,l=void 0!==p&&p,s=e.groupId,u=m(e),y=(0,o.useState)((function(){return function(e){var n,t=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var o=null!=(n=a.find((function(e){return e.default})))?n:a[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:i,tabValues:u})})),g=y[0],b=y[1],k=f({queryString:l,groupId:s}),h=k[0],v=k[1],N=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:s}.groupId),t=(0,c.Nk)(n),a=t[0],r=t[1],[a,(0,o.useCallback)((function(e){n&&r.set(e)}),[n,r])]),C=N[0],w=N[1],T=function(){var e=null!=h?h:C;return d({value:e,tabValues:u})?e:null}();return(0,o.useLayoutEffect)((function(){T&&b(T)}),[T]),{selectedValue:g,selectValue:(0,o.useCallback)((function(e){if(!d({value:e,tabValues:u}))throw new Error("Can't select invalid tab value="+e);b(e),v(e),w(e)}),[v,w,u]),tabValues:u}}var g=t(72389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function k(e){var n=e.className,t=e.block,p=e.selectedValue,l=e.selectValue,s=e.tabValues,c=[],u=(0,i.o5)().blockElementScrollPositionUntilNextRender,m=function(e){var n=e.currentTarget,t=c.indexOf(n),a=s[t].value;a!==p&&(u(n),l(a))},d=function(e){var n,t=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":var a,o=c.indexOf(e.currentTarget)+1;t=null!=(a=c[o])?a:c[0];break;case"ArrowLeft":var r,i=c.indexOf(e.currentTarget)-1;t=null!=(r=c[i])?r:c[c.length-1]}null==(n=t)||n.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":t},n)},s.map((function(e){var n=e.value,t=e.label,i=e.attributes;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:p===n?0:-1,"aria-selected":p===n,key:n,ref:function(e){return c.push(e)},onKeyDown:d,onClick:m},i,{className:(0,r.Z)("tabs__item",b.tabItem,null==i?void 0:i.className,{"tabs__item--active":p===n})}),null!=t?t:n)})))}function h(e){var n=e.lazy,t=e.children,a=e.selectedValue,r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){var i=r.find((function(e){return e.props.value===a}));return i?(0,o.cloneElement)(i,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},r.map((function(e,n){return(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==a})})))}function v(e){var n=y(e);return o.createElement("div",{className:(0,r.Z)("tabs-container",b.tabList)},o.createElement(k,(0,a.Z)({},e,n)),o.createElement(h,(0,a.Z)({},e,n)))}function N(e){var n=(0,g.Z)();return o.createElement(v,(0,a.Z)({key:String(n)},e))}},97743:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>c,default:()=>g,frontMatter:()=>s,metadata:()=>u,toc:()=>d});var a=t(87462),o=t(63366),r=(t(67294),t(3905)),i=t(74866),p=t(85162),l=["components"],s={title:"Compose",description:"Composition of HTML tags",sidebar_label:"Compose",sidebar_position:20},c=void 0,u={unversionedId:"docs/guides/applications/compose",id:"docs/guides/applications/compose",title:"Compose",description:"Composition of HTML tags",source:"@site/docs/docs/guides/applications/compose.md",sourceDirName:"docs/guides/applications",slug:"/docs/guides/applications/compose",permalink:"/docs/guides/applications/compose",draft:!1,editUrl:"https://github.com/micro-lc/documentation/edit/main/docs/docs/guides/applications/compose.md",tags:[],version:"current",lastUpdatedBy:"epessina",sidebarPosition:20,frontMatter:{title:"Compose",description:"Composition of HTML tags",sidebar_label:"Compose",sidebar_position:20},sidebar:"docs",previous:{title:"iFrames",permalink:"/docs/guides/applications/iframes"},next:{title:"Parcels",permalink:"/docs/guides/applications/parcels"}},m={},d=[{value:"Usage",id:"usage",level:2},{value:"Plugin configuration",id:"plugin-configuration",level:2},{value:"Content definition",id:"content-definition",level:2},{value:"Component representation",id:"component-representation",level:2},{value:"Properties injection",id:"properties-injection",level:2},{value:"User-supplied properties",id:"user-supplied-properties",level:3},{value:"Interpolated properties",id:"interpolated-properties",level:3},{value:"<code>microlcApi</code>",id:"microlcapi",level:4},{value:"<code>composerApi</code>",id:"composerapi",level:4},{value:"<code>eventBus</code>",id:"eventbus",level:4},{value:"<code>currentUser</code>",id:"currentuser",level:4},{value:"Shared properties",id:"shared-properties",level:4},{value:"Application options",id:"application-options",level:2},{value:"<code>fetchConfigOnMount</code>",id:"fetchconfigonmount",level:3}],f={toc:d},y="wrapper";function g(e){var n=e.components,t=(0,o.Z)(e,l);return(0,r.kt)(y,(0,a.Z)({},f,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"A ",(0,r.kt)("a",{parentName:"p",href:"/docs/concepts/composition"},"composable")," application is a pseudo-HTML document enhanced with JavaScript properties\ndynamically injected by the ",(0,r.kt)("a",{parentName:"p",href:"/api/composer-api"},"composer application"),". "),(0,r.kt)("p",null,"The resulting DOM tree is constructed on the basis of a specific configuration, which can be directly provided, or sourced\nfrom an external JSON or YAML file."),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"Declare an application with integration mode ",(0,r.kt)("inlineCode",{parentName:"p"},"compose")," in ",(0,r.kt)("micro-lc",null)," configuration:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'interface ComposableApplication {\n  integrationMode: "compose"\n  config: PluginConfiguration | string // See explanation below\n  route: string // Path on which the composable application will be rendered\n  options?: ComposableApplicationOptions // See explanation below\n}\n')),(0,r.kt)("p",null,"The application configuration has to be supplied with the ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," key, which may be either a full\n",(0,r.kt)("a",{parentName:"p",href:"#plugin-configuration"},"configuration object")," or a URL string from which a configuration with the same structure can\nbe downloaded."),(0,r.kt)("h2",{id:"plugin-configuration"},"Plugin configuration"),(0,r.kt)("p",null,"The configuration of a composable application is the blueprint used by ",(0,r.kt)("micro-lc",null)," composer (being it the\ndefault one or a ",(0,r.kt)("a",{parentName:"p",href:"/api/micro-lc-web-component#composeruri"},"custom implementation"),") to dynamically construct\nthe page at runtime."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"interface PluginConfiguration {\n  $schema: string\n  sources?:\n    | string\n    | string[]\n    | {\n        uris: string | string[]\n        importmap?: ImportMap\n      }\n  content: Content\n}\n")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Key ",(0,r.kt)("inlineCode",{parentName:"p"},"$schema")," can be used to reference ",(0,r.kt)("micro-lc",null)," plugin configuration\n",(0,r.kt)("a",{parentName:"p",href:"https://cdn.jsdelivr.net/npm/@micro-lc/interfaces@latest/schemas/v2/plugin.schema.json"},"JSON schema")," to greatly ease\nthe writing process by constantly validating the JSON or YAML content against it.")),(0,r.kt)("p",null,"The actual page structure is provided in ",(0,r.kt)("inlineCode",{parentName:"p"},"content")," key, and building blocks are HTML5 elements or custom web components.\nIn the letter case, sources have to be provided for custom components, and one can do so with the ",(0,r.kt)("inlineCode",{parentName:"p"},"sources")," key."),(0,r.kt)("p",null,"By polymorphism, ",(0,r.kt)("inlineCode",{parentName:"p"},"sources")," can be a string or an array of strings if just JavaScript asset entries have to be provided.\nIf an ",(0,r.kt)("a",{parentName:"p",href:"/docs/guides/reuse-third-party-libraries"},"importmap")," is needed, ",(0,r.kt)("inlineCode",{parentName:"p"},"sources")," can become an object housing JavaScript asset\nentry URIs (key ",(0,r.kt)("inlineCode",{parentName:"p"},"uris"),") and importmap definition (key ",(0,r.kt)("inlineCode",{parentName:"p"},"importmap"),")."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="micro-lc.conf.yaml"',title:'"micro-lc.conf.yaml"'},"applications:\n\n  # Single JavaScript asset entry URI\n  app-1:\n    sources: https://my-static-server/my-web-component.js\n    content: ...\n\n  # Multiple JavaScript asset entry URIs\n  app-2:\n    sources: \n      - https://my-static-server/my-web-component-1.js\n      - https://my-static-server/my-web-component-2.js\n    content: ...\n\n  # Importmap\n  app-3:\n    sources:\n      uris: https://my-static-server/my-web-component.js\n      importmap:\n        imports: ...\n        scopes: ...\n    content: ...\n")),(0,r.kt)("h2",{id:"content-definition"},"Content definition"),(0,r.kt)("p",null,"A composable application content is a representation of a pseudo-DOM tree written in a markup language (namely JSON\nor YAML) that undergoes a ",(0,r.kt)("a",{parentName:"p",href:"/docs/concepts/composition"},"series of processes")," to be transformed into a valid, appendable\nDOM."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"type Content = string | number | Component | (Component | number | string)[]\n")),(0,r.kt)("p",null,"A valid content can assume different shapes, as long as it is a valid HTML element or a convertible representation of\none. It may be:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"a primitive (",(0,r.kt)("inlineCode",{parentName:"li"},"string")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"number"),")",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'content: "A string is a valid HTML element!"\n'))),(0,r.kt)("li",{parentName:"ul"},"a stringified DOM tree#stringified-dom-tree, particularly powerful when used in YAML files, since it can benefit\nfrom ",(0,r.kt)("a",{parentName:"li",href:"https://yaml-multiline.info/"},"YAML block scalars")," to greatly enhance readability",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'content: |\n  <div .classname=${"my-class"} .microlcApi=${microlcApi}>\n    <p style="color: red;">\n      This is written as a single string\n    </p>\n  </div>\n'))),(0,r.kt)("li",{parentName:"ul"},"a single ",(0,r.kt)("a",{parentName:"li",href:"#component-representation"},"component representation"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'content:\n  tag: div\n  attributes:\n    style: "color: red;"\n  properties:\n    classname: my-class\n  content: This structure is transformed into a valid HTML element\n'))),(0,r.kt)("li",{parentName:"ul"},"a list of the above",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'content:\n  - "String element"\n  - 12\n  - tag: div\n')))),(0,r.kt)("h2",{id:"component-representation"},"Component representation"),(0,r.kt)("p",null,"A component corresponds to an HTML node, being it an HTML5 element or a custom web component. Practically speaking,\na component is an object with the following structure:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"interface Component {\n  /** HTML node tag name */\n  tag: string\n  \n  /** HTML5 attribute applied using setAttribute API */\n  attributes?: Record<string, string>\n  \n  /** HTML5 boolean attribute applied using setAttribute API */\n  booleanAttributes?: string | string[]\n  \n  /** DOM element property applied as object property after creating an element */\n  properties?: Record<string, unknown>\n\n  /** Node children */\n  content?: Content\n}\n")),(0,r.kt)("p",null,"The type is recursive as ",(0,r.kt)("inlineCode",{parentName:"p"},"content")," is a ",(0,r.kt)("a",{parentName:"p",href:"#content-definition"},"content definition")," which may itself take the form of a\n",(0,r.kt)("inlineCode",{parentName:"p"},"Component"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'content:\n  tag: button\n  attributes:\n    style: "color: red;"\n  booleanAttributes: disabled\n  content: Click me!\n\n# Output: <button disabled style="color: red;">Click me!</button>\n\n---\n\ncontent:\n  tag: my-component\n  attributes:\n    class: my-class\n    my-numeric-attribute: 2\n  properties:\n    myCustomProperty: some-value\n  content:\n    tag: span\n    content: Hello World!\n\n# Output: \ud83d\udc47\n#   <my-component class="my-class" my-numeric-attribute="2">\n#     <span>Hello World!</span>\n#   </my-component>\n#\n#   document.querySelector("my-component").myCustomProperty \ud83d\udc49 "some-value"\n')),(0,r.kt)("h2",{id:"properties-injection"},"Properties injection"),(0,r.kt)("p",null,"When composing a content, the constructed nodes can receive two types of properties: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"user-supplied properties ",(0,r.kt)("strong",{parentName:"li"},"explicitly declared")," in configuration, and"),(0,r.kt)("li",{parentName:"ul"},"a set of ",(0,r.kt)("strong",{parentName:"li"},"special properties")," interpolated and injected directly by ",(0,r.kt)("micro-lc",null)," composer.")),(0,r.kt)("h3",{id:"user-supplied-properties"},"User-supplied properties"),(0,r.kt)("p",null,"User-supplied properties can be declared using the ",(0,r.kt)("inlineCode",{parentName:"p"},"properties")," property of\n",(0,r.kt)("a",{parentName:"p",href:"#component-representation"},"component interface"),", or through a special ",(0,r.kt)("em",{parentName:"p"},"dotted notation"),"\n(",(0,r.kt)("inlineCode",{parentName:"p"},".property_name=${property_value}"),") if relying on the stringified DOM tree representation. Either case, any\n",(0,r.kt)("strong",{parentName:"p"},"valid JSON value")," is acceptable as property and injected into components context as is."),(0,r.kt)(i.Z,{mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"0",label:"Objective representation",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'content:\n  tag: my-component\n  properties:\n    stringProp: foo\n    numberProp: 3\n    arrayProp:\n      - foo\n      - bar\n    objectProp:\n      foo: bar\n\n# myComponent.stringProp \ud83d\udc49 Output: "foo"\n# myComponent.numberProp \ud83d\udc49 Output: 3\n# myComponent.arrayProp  \ud83d\udc49 Output: ["foo", "bar"]\n# myComponent.objectProp \ud83d\udc49 Output: {foo: "bar"}\n'))),(0,r.kt)(p.Z,{value:"1",label:"Stringified representation",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'layout:\n  content: |\n    <my-component\n      .stringProp=${"foo"}\n      .numberProp=${3}\n      .arrayProp=${["foo", "bar"]}\n      .objectProp=${{"foo": "bar"}}\n    ></my-component>\n\n# myComponent.stringProp \ud83d\udc49 Output: "foo"\n# myComponent.numberProp \ud83d\udc49 Output: 3\n# myComponent.arrayProp  \ud83d\udc49 Output: ["foo", "bar"]\n# myComponent.objectProp \ud83d\udc49 Output: {foo: "bar"}\n')))),(0,r.kt)("h3",{id:"interpolated-properties"},"Interpolated properties"),(0,r.kt)("p",null,(0,r.kt)("micro-lc",null)," injects a series of special properties into each DOM node it creates. These properties are\nautomatically interpolated, and therefore they need to be marked by ",(0,r.kt)("strong",{parentName:"p"},"reserved keywords")," for ",(0,r.kt)("micro-lc",null)," to\nrecognize them and assign them the correct value (always in a secure manner without ",(0,r.kt)("inlineCode",{parentName:"p"},"eval")," or similar structures)."),(0,r.kt)("p",null,"When using ",(0,r.kt)("em",{parentName:"p"},"object component representation"),", interpolated properties ",(0,r.kt)("strong",{parentName:"p"},"do not need to be explicitly declared"),". However,\nif they are, the key used must match the reserved one, and the value must be equal to the key. On the other hand, when\nusing ",(0,r.kt)("em",{parentName:"p"},"stringified DOM tree representation"),", properties you want to be injected need to be ",(0,r.kt)("strong",{parentName:"p"},"explicitly declared")," with\nthe correct key and value."),(0,r.kt)("p",null,"For example, let's consider the special property ",(0,r.kt)("inlineCode",{parentName:"p"},"microlcApi")," and different scenarios."),(0,r.kt)(i.Z,{mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"0",label:"Objective representation",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"content:\n  tag: my-component\n\n# myComponent.microlcApi is defined and correctly set\n\n---\n\ncontent:\n  tag: my-component\n  properties:\n    stringProp: foo\n\n# myComponent.microlcApi is defined and correctly set\n\n---\n\ncontent:\n  tag: my-component\n  properties:\n    microlcApi: microlcApi\n    \n# myComponent.microlcApi is defined and correctly set\n\n---\n\ncontent:\n  tag: my-component\n  properties:\n    microlcApi: foo\n\n# myComponent.microlcApi is undefined\n"))),(0,r.kt)(p.Z,{value:"1",label:"Stringified representation",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"layout:\n  content: |\n    <my-component></my-component>\n\n# myComponent.microlcApi is undefined\n\n---\n\nlayout:\n  content: |\n    <my-component .microlcApi=${microlcApi}></my-component>\n\n# myComponent.microlcApi is defined and correctly set\n\n---\n\nlayout:\n  content: |\n    <my-component .microlcApi=${foo}></my-component>\n\n# myComponent.microlcApi is undefined\n")))),(0,r.kt)("p",null,"The special properties injected by ",(0,r.kt)("micro-lc",null)," are the following."),(0,r.kt)("h4",{id:"microlcapi"},(0,r.kt)("inlineCode",{parentName:"h4"},"microlcApi")),(0,r.kt)("div",{style:{paddingLeft:"1em"}},(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Type: ",(0,r.kt)("inlineCode",{parentName:"li"},"Object"))),(0,r.kt)("p",null,"Common ",(0,r.kt)("a",{parentName:"p",href:"../../../api/micro-lc-api"},"API")," offered by ",(0,r.kt)("micro-lc",null)," as\n",(0,r.kt)("a",{parentName:"p",href:"/docs/concepts/communication#micro-lc-api"},"mean of communication"),".")),(0,r.kt)("h4",{id:"composerapi"},(0,r.kt)("inlineCode",{parentName:"h4"},"composerApi")),(0,r.kt)("div",{style:{paddingLeft:"1em"}},(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Type: ",(0,r.kt)("inlineCode",{parentName:"li"},"Object"))),(0,r.kt)("p",null,"Common ",(0,r.kt)("a",{parentName:"p",href:"/api/composer-api"},"API")," offered by ",(0,r.kt)("micro-lc",null)," composer to achieve\n",(0,r.kt)("a",{parentName:"p",href:"/docs/concepts/composition"},"composition"),".")),(0,r.kt)("h4",{id:"eventbus"},(0,r.kt)("inlineCode",{parentName:"h4"},"eventBus")),(0,r.kt)("div",{style:{paddingLeft:"1em"}},(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Composed ",(0,r.kt)("a",{parentName:"p",href:"/docs/guides/layout#build-a-layout"},"layouts")," and ",(0,r.kt)("a",{parentName:"p",href:"/docs/guides/layout#mount-point"},"mount points")," ",(0,r.kt)("strong",{parentName:"p"},"do not have access")," to\nthis property.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Type",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"interface EventBus<T = unknown> extends rxjs.ReplaySubject<T> {\n  [index: number]: rxjs.ReplaySubject<T>\n  pool: Record<string, rxjs.ReplaySubject<T>>\n}\n")))),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://rxjs.dev/api/index/class/ReplaySubject"},"RxJS ReplaySubject")," useful to establish a reactive communication\nbetween components of the same application."),(0,r.kt)("p",null,"The property gives component the ability to spawn multiple ReplaySubjects, allowing multichannel communication.\n",(0,r.kt)("inlineCode",{parentName:"p"},"eventBus")," itself is a ReplaySubject, but calling ",(0,r.kt)("inlineCode",{parentName:"p"},"eventBus[0]")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"eventBus.pool.foo")," will create two other \u2013\ncompletely different \u2013 ReplaySubject entities."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"title=micro-lc.config.yaml",title:"micro-lc.config.yaml"},"content:\n  tag: my-component\n  \n# myComponent.eventBus !== myComponent.eventBus[0] !== myComponent.eventBus.pool.foo\n"))),(0,r.kt)("h4",{id:"currentuser"},(0,r.kt)("inlineCode",{parentName:"h4"},"currentUser")),(0,r.kt)("div",{style:{paddingLeft:"1em"}},(0,r.kt)("admonition",{title:"Deprecation notice",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"This property will be removed in future versions. Use ",(0,r.kt)("micro-lc",null)," API\n",(0,r.kt)("a",{parentName:"p",href:"/api/micro-lc-api/reactive-communication#subscribe"},"subscribe method")," instead.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Type: ",(0,r.kt)("inlineCode",{parentName:"li"},"rxjs.Observable"))),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://rxjs.dev/guide/observable"},"RxJS Observable")," taken from ",(0,r.kt)("micro-lc",null)," API\n",(0,r.kt)("a",{parentName:"p",href:"/api/micro-lc-api/reactive-communication#subscribe"},"Pub/Sub channel")," containing information on the current\napplication user.")),(0,r.kt)("h4",{id:"shared-properties"},"Shared properties"),(0,r.kt)("div",{style:{paddingLeft:"1em"}},(0,r.kt)("p",null,"Content of ",(0,r.kt)("inlineCode",{parentName:"p"},"properties")," key of configuration key ",(0,r.kt)("a",{parentName:"p",href:"/api/micro-lc-web-component#shared"},(0,r.kt)("inlineCode",{parentName:"a"},"shared")),". ",(0,r.kt)("inlineCode",{parentName:"p"},"properties"),"\nkey is spread and each of its property is injected independently."),(0,r.kt)("p",null,"Example:"),(0,r.kt)(i.Z,{mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"0",label:"Objective representation",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'shared:\n  properties:\n    foo: bar\n\nlayout:\n  content:\n    tag: my-component\n  attributes:\n    id: my-div\n\n# myComponent.foo \ud83d\udc49 Output: "bar"\n'))),(0,r.kt)(p.Z,{value:"1",label:"Stringified representation",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'shared:\n  properties:\n    foo: bar\n\nlayout:\n  content: |\n    <my-component id="my-div" .foo=${foo}></my-component>\n\n# myComponent.foo \ud83d\udc49 Output: "bar"\n'))))),(0,r.kt)("h2",{id:"application-options"},"Application options"),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Application options are available starting form ",(0,r.kt)("micro-lc",null)," version ",(0,r.kt)("inlineCode",{parentName:"p"},"2.4.2")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"@micro-lc/composer")," version ",(0,r.kt)("inlineCode",{parentName:"p"},"2.2.0"))),(0,r.kt)("p",null,"A set of options can be passed along in the application configuration through the ",(0,r.kt)("inlineCode",{parentName:"p"},"options")," keyword. Options are an optional object with the following structure:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"interface ComposableApplicationOptions {\n  fetchConfigOnMount?: boolean\n}\n")),(0,r.kt)("h3",{id:"fetchconfigonmount"},(0,r.kt)("inlineCode",{parentName:"h3"},"fetchConfigOnMount")),(0,r.kt)("p",null,"By default, ",(0,r.kt)("micro-lc",null)," retrieves compose applications configurations just once, at ",(0,r.kt)("em",{parentName:"p"},"bootstrap")," (i.e., the first time the user navigates to them). At any subsequent visit, configurations are retrieved from an in-memory cache during the ",(0,r.kt)("em",{parentName:"p"},"mount")," stage of the application lifecycle."),(0,r.kt)("p",null,"If you need to re-fetch the configuration each time an application is visited, you can instruct ",(0,r.kt)("micro-lc",null)," to do so by setting the ",(0,r.kt)("inlineCode",{parentName:"p"},"fetchConfigOnMount")," option to ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"This option will have effect only on applications that specify a ",(0,r.kt)("strong",{parentName:"p"},"URL string")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," key.")))}g.isMDXComponent=!0}}]);