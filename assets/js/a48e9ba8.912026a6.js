"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2775],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var o=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(n),d=i,h=m["".concat(s,".").concat(d)]||m[d]||u[d]||a;return n?o.createElement(h,r(r({ref:t},c),{},{components:n})):o.createElement(h,r({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,r=new Array(a);r[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:i,r[1]=l;for(var p=2;p<a;p++)r[p]=n[p];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},81955:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>g,frontMatter:()=>s,metadata:()=>c,toc:()=>u});var o=n(87462),i=n(63366),a=n(67294),r=n(3905),l=["components"],s={title:"Step 4: Applications",description:"tutorial step to integrate mfe as applications",sidebar_label:"Step 4: Applications",sidebar_position:40},p=void 0,c={unversionedId:"docs/compose-your-frontend/applications",id:"docs/compose-your-frontend/applications",title:"Step 4: Applications",description:"tutorial step to integrate mfe as applications",source:"@site/docs/docs/compose-your-frontend/04-applications.md",sourceDirName:"docs/compose-your-frontend",slug:"/docs/compose-your-frontend/applications",permalink:"/docs/compose-your-frontend/applications",draft:!1,editUrl:"https://github.com/micro-lc/documentation/edit/main/docs/docs/compose-your-frontend/04-applications.md",tags:[],version:"current",lastUpdatedBy:"Edoardo Pessina",sidebarPosition:40,frontMatter:{title:"Step 4: Applications",description:"tutorial step to integrate mfe as applications",sidebar_label:"Step 4: Applications",sidebar_position:40},sidebar:"docs",previous:{title:"Step 3: Layout",permalink:"/docs/compose-your-frontend/layout"},next:{title:"Step 5: Routing",permalink:"/docs/compose-your-frontend/routing"}},m={},u=[{value:"Compose",id:"compose",level:2},{value:"IFrame",id:"iframe",level:2},{value:"Parcel",id:"parcel",level:2}],d={toc:u},h="wrapper";function g(e){var t=e.components,n=(0,i.Z)(e,l);return(0,r.kt)(h,(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"A key element is notably missing in the configuration: ",(0,r.kt)("inlineCode",{parentName:"p"},"applications"),"."),(0,r.kt)("p",null,"As previously mentioned, the ",(0,r.kt)("a",{parentName:"p",href:"/docs/guides/applications/"},"applications")," configuration handles the dynamic aspect of the ",(0,r.kt)("micro-lc",null)," viewport, which mounts and unmounts components based on URL changes."),(0,r.kt)("p",null,"Now that we've grasped the concept of ",(0,r.kt)("inlineCode",{parentName:"p"},"composition"),", let's delve deeper into the ",(0,r.kt)("micro-lc",null)," ",(0,r.kt)("inlineCode",{parentName:"p"},"applications")," configuration."),(0,r.kt)("h2",{id:"compose"},"Compose"),(0,r.kt)("p",null,"So far, we have the ",(0,r.kt)("inlineCode",{parentName:"p"},"home")," application, integrated as ",(0,r.kt)("inlineCode",{parentName:"p"},"compose"),' with "integrationMode" set to "compose":'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": 2,\n  "applications": {\n    "home": {\n      "integrationMode": "compose",\n      "route": "/",\n      "config": {\n        ...\n      }\n    }\n  },\n  ...\n}\n')),(0,r.kt)("p",null,"Three fields are configured for the ",(0,r.kt)("inlineCode",{parentName:"p"},"home")," application:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"route")," serves as the activation rule for this application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"integrationMode"),", which, as of now, has only the value compose."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"config")," provides the composition context.")),(0,r.kt)("p",null,"To resolve the ",(0,r.kt)("inlineCode",{parentName:"p"},"404")," error, let's introduce the ",(0,r.kt)("inlineCode",{parentName:"p"},"about")," application using a different integration mode."),(0,r.kt)("h2",{id:"iframe"},"IFrame"),(0,r.kt)("p",null,"The simplest form of microfrontend integration is the HTML iframe tag, which embeds one webpage within the viewport of another."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"An iframe with a ",(0,r.kt)("inlineCode",{parentName:"p"},"src")," attribute with the same origin as the top window won't be sandboxed unless specified by the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#attributes"},(0,r.kt)("inlineCode",{parentName:"a"},"sandbox")," attribute"),".")),(0,r.kt)("p",null,"For demonstration purposes, we'll use ",(0,r.kt)("a",{parentName:"p",href:"https://example.com"},"https://example.com")," as a placeholder."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": 2,\n  "applications": {\n    "home": {\n      ...\n    },\n    "about": {\n      "integrationMode": "iframe",\n      "route": "/about",\n      "src": "https://example.com/"\n    }\n  },\n  "layout": {\n    ...\n  }\n}\n')),(0,r.kt)("p",null,"Now, using the side menu does not pop the ",(0,r.kt)("inlineCode",{parentName:"p"},"404")," anymore and even the url bar shows correctly the redirections."),(0,r.kt)(a.Fragment,null),(0,r.kt)("tutorial-frame",{configuration:{version:2,applications:{home:{integrationMode:"compose",route:"/",config:{content:{tag:"div",attributes:{style:"height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; row-gap: 24px; font-family: Arial;"},content:[{tag:"img",attributes:{alt:"logo",src:"https://cdn.jsdelivr.net/npm/@micro-lc/orchestrator/dist/favicon.png"}},{tag:"bk-button",properties:{content:"Go to official documentation",action:{type:"href",config:{href:"https://micro-lc.io/",target:"_blank"}}}}]},sources:["https://cdn.jsdelivr.net/npm/@micro-lc/bk-web-components/dist/bk-web-components.esm.js"]}},about:{integrationMode:"iframe",route:"/about",src:"https://example.com/"}},layout:{content:{tag:"bk-layout",properties:{logo:{url:"https://avatars.githubusercontent.com/u/92730708?s=200&v=4"},menuItems:[{icon:{library:"@ant-design/icons-svg",selector:"HomeOutlined"},id:"home",label:"Home",type:"application"},{icon:{library:"@ant-design/icons-svg",selector:"ContactsOutlined"},id:"about",label:"About",type:"application"}]}},sources:["https://cdn.jsdelivr.net/npm/@micro-lc/bk-web-components/dist/bk-web-components.esm.js"]}}}),(0,r.kt)("p",null,"The iframe from ",(0,r.kt)("inlineCode",{parentName:"p"},"example.com")," fits perfectly within the context due to the preset style that ",(0,r.kt)("micro-lc",null)," sets on iframe-integrated applications."),(0,r.kt)("p",null,"With the introduction of this new integration mode, ",(0,r.kt)("inlineCode",{parentName:"p"},"iframe"),", the ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," property becomes irrelevant since there's no need for a composition context. Instead, ",(0,r.kt)("inlineCode",{parentName:"p"},"src")," mirrors the ",(0,r.kt)("inlineCode",{parentName:"p"},"iframe")," ",(0,r.kt)("inlineCode",{parentName:"p"},"src")," attribute."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"route")," field remains consistent across both ",(0,r.kt)("inlineCode",{parentName:"p"},"integrationMode"),"s as it signifies the ",(0,r.kt)("micro-lc",null)," router activation rule."),(0,r.kt)("p",null,"Moving on, let's explore the third integration mode."),(0,r.kt)("p",null,"Let's get to the third integration mode."),(0,r.kt)("h2",{id:"parcel"},"Parcel"),(0,r.kt)("p",null,"The term for this integration mode is derived from the ",(0,r.kt)("inlineCode",{parentName:"p"},"single-spa")," lexicon. In ",(0,r.kt)("micro-lc",null),", a ",(0,r.kt)("inlineCode",{parentName:"p"},"parcel")," symbolizes a single-page application developed with any supported frameworks and linked to a specific application route."),(0,r.kt)("p",null,"Incorporating external single-page applications into other web pages can pose challenges. Different orchestrators have various solutions to these challenges. It's crucial to highlight the inherent difficulty in integrating microfrontends:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"a JavaScript script cannot run its code with a proxied version of both ",(0,r.kt)("inlineCode",{parentName:"p"},"globalThis")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"window"))),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/tc39/proposal-shadowrealm"},"shadow realm proposal")," is an attempt to resolve this issue."),(0,r.kt)("p",null,"This means that a bundled single-page application might:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Misuse the ",(0,r.kt)("inlineCode",{parentName:"li"},"document")," object in JavaScript, especially when referring to the ",(0,r.kt)("inlineCode",{parentName:"li"},"body")," element."),(0,r.kt)("li",{parentName:"ol"},"Have conflicting CSS with the orchestrator."),(0,r.kt)("li",{parentName:"ol"},"Utilize globals that might interfere with another microfrontend's use of the same globals, such as stubbing or wrapping ",(0,r.kt)("inlineCode",{parentName:"li"},"fetch"),", using multiple instances of libraries like ",(0,r.kt)("inlineCode",{parentName:"li"},"monaco-editor"),", etc."),(0,r.kt)("li",{parentName:"ol"},"Listen to the ",(0,r.kt)("inlineCode",{parentName:"li"},"popstate")," event and introduce another router."),(0,r.kt)("li",{parentName:"ol"},"And many other potential issues...")),(0,r.kt)("p",null,"While ",(0,r.kt)("micro-lc",null)," and its foundational libraries, ",(0,r.kt)("a",{parentName:"p",href:"https://qiankun.umijs.org"},"qiankun")," and ",(0,r.kt)("a",{parentName:"p",href:"https://single-spa.js.org"},"single-spa"),", can implement measures to circumvent these issues, it's crucial to remember:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Remedies might sometimes be inadequate. Thus, when using ",(0,r.kt)("inlineCode",{parentName:"p"},"globals"),", always be conscious of other applications.")),(0,r.kt)("p",null,"To integrate an existing single-page application, you only need to make minor adjustments. This topic is covered by dedicated ",(0,r.kt)("a",{parentName:"p",href:"/docs/guides/applications/"},"templates"),". For now, use a React application compatible with ",(0,r.kt)("micro-lc",null),", available here."),(0,r.kt)("p",null,"Upon adding a new application and creating a new entry in the side menu, a third item appears. Clicking on it brings up the React application."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": 2,\n  "applications": {\n    "home": {\n      ...\n    },\n    "about": {\n      ...\n    },\n    "hash": {\n      "integrationMode": "parcel",\n      "route": "/hash",\n      "entry": "https://cdn.mia-platform.eu/micro-lc/examples/0.1.3/static/parcels/react-hash-router/index.html"\n    }\n  },\n  "layout": {\n    ...\n  }\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": 2,\n  "applications": {\n    ...\n  },\n  "layout": {\n    "content": {\n      "tag": "bk-layout",\n      "properties": {\n        ...,\n        "menuItems": [\n          {\n            ...\n          },\n          {\n            ...\n          },\n          {\n            "icon": {\n              "library": "@fortawesome/free-solid-svg-icons",\n              "selector": "faHashtag"\n            },\n            "id": "hash",\n            "label": "Hash",\n            "type": "application"\n          }\n        ]\n      }\n    },\n    "sources": [\n      ...\n    ]\n  }\n}\n')),(0,r.kt)(a.Fragment,null),(0,r.kt)("tutorial-frame",{configuration:{version:2,applications:{home:{integrationMode:"compose",route:"/",config:{content:{tag:"div",attributes:{style:"height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; row-gap: 24px; font-family: Arial;"},content:[{tag:"img",attributes:{alt:"logo",src:"https://cdn.jsdelivr.net/npm/@micro-lc/orchestrator/dist/favicon.png"}},{tag:"bk-button",properties:{content:"Go to official documentation",action:{type:"href",config:{href:"https://micro-lc.io/",target:"_blank"}}}}]},sources:["https://cdn.jsdelivr.net/npm/@micro-lc/bk-web-components/dist/bk-web-components.esm.js"]}},about:{integrationMode:"iframe",route:"/about",src:"https://example.com/"},hash:{integrationMode:"parcel",route:"/hash",entry:"https://cdn.mia-platform.eu/micro-lc/examples/0.1.3/static/parcels/react-hash-router/index.html"}},layout:{content:{tag:"bk-layout",properties:{logo:{url:"https://avatars.githubusercontent.com/u/92730708?s=200&v=4"},menuItems:[{icon:{library:"@ant-design/icons-svg",selector:"HomeOutlined"},id:"home",label:"Home",type:"application"},{icon:{library:"@ant-design/icons-svg",selector:"ContactsOutlined"},id:"about",label:"About",type:"application"},{icon:{library:"@fortawesome/free-solid-svg-icons",selector:"faHashtag"},id:"hash",label:"Hash",type:"application"}]}},sources:["https://cdn.jsdelivr.net/npm/@micro-lc/bk-web-components/dist/bk-web-components.esm.js"]}}}),(0,r.kt)("p",null,"The React application's internal routing is easily managed by such routers since they don't need to be aware of the absolute URL pathname they are mounted on. However, a minor inconvenience arises as the ",(0,r.kt)("inlineCode",{parentName:"p"},"/hash")," URL is not concatenated with a trailing ",(0,r.kt)("inlineCode",{parentName:"p"},"/"),", leading to subroutes like ",(0,r.kt)("inlineCode",{parentName:"p"},"/hash#/about"),"."),(0,r.kt)("p",null,"Let's delve into routing and how to rectify this issue."))}g.isMDXComponent=!0}}]);