"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[93],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=a,h=u["".concat(l,".").concat(d)]||u[d]||m[d]||i;return n?o.createElement(h,r(r({ref:t},p),{},{components:n})):o.createElement(h,r({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:a,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},77168:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>f,frontMatter:()=>l,metadata:()=>p,toc:()=>m});var o=n(87462),a=n(63366),i=n(67294),r=n(3905),s=["components"],l={title:"Step 3: Layout",description:"tutorial step to define Layout for the website",sidebar_label:"Step 3: Layout",sidebar_position:30},c=void 0,p={unversionedId:"docs/compose-your-frontend/layout",id:"docs/compose-your-frontend/layout",title:"Step 3: Layout",description:"tutorial step to define Layout for the website",source:"@site/docs/docs/compose-your-frontend/03-layout.md",sourceDirName:"docs/compose-your-frontend",slug:"/docs/compose-your-frontend/layout",permalink:"/docs/compose-your-frontend/layout",draft:!1,editUrl:"https://github.com/micro-lc/documentation/edit/main/docs/docs/compose-your-frontend/03-layout.md",tags:[],version:"current",lastUpdatedBy:"Paola Nicosia",sidebarPosition:30,frontMatter:{title:"Step 3: Layout",description:"tutorial step to define Layout for the website",sidebar_label:"Step 3: Layout",sidebar_position:30},sidebar:"docs",previous:{title:"Step 2: Compose Less By Reusing",permalink:"/docs/compose-your-frontend/compose-less-by-reusing"},next:{title:"Step 4: Applications",permalink:"/docs/compose-your-frontend/applications"}},u={},m=[{value:"An About Page",id:"an-about-page",level:2}],d={toc:m},h="wrapper";function f(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)(h,(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Having gained a grasp on composition, we can now delve deeper into the ",(0,r.kt)("micro-lc",null)," configuration."),(0,r.kt)("p",null,(0,r.kt)("micro-lc",null)," is a web component that performs several functions. Primarily, it\n",(0,r.kt)("a",{parentName:"p",href:"/docs/concepts/separation-of-concerns"},"divides")," the DOM into two sections:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"layout")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"content"))),(0,r.kt)("p",null,"The content varies based on the page URL by mounting and unmounting microfrontends. In contrast, the layout remains static, as illustrated below:"),(0,r.kt)(i.Fragment,null),(0,r.kt)("example-frame",{id:"1",base:"/frames/concepts/separation-of-concerns",height:"550px",sourceTabs:[{filePath:"/config.yaml",isDefault:!0}],src:"/",title:"Viewport separation"}),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The configuration for ",(0,r.kt)("micro-lc",null)," can be in yaml format. However, using yaml config files requires an extra ~15kB to be loaded on the browser. Fortunately, this operation is dynamic, so it doesn't affect json config files, which have a native interpreter in the browser window.")),(0,r.kt)("p",null,"There's no limit to the shape or style of the ",(0,r.kt)("a",{parentName:"p",href:"/docs/guides/layout"},"layout"),". We'll begin with a layout featuring a sidebar and top bar menu, reserving the content space for applications or microfrontends that dynamically change beneath the top bar and to the right of the sidebar."),(0,r.kt)("p",null,"In the playground, your current configuration should resemble:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": 2,\n  "applications": {\n    "home": {...}\n  }\n}\n')),(0,r.kt)("p",null,"The applications field configures the content portion of the ",(0,r.kt)("micro-lc",null)," viewport. The layout field, on the other hand, is used to set up the layout portion of the viewport:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": 2,\n  "applications": {\n    ...\n  },\n  "layout": {\n    \ud83d\udc48 this is a composition context\n  }\n}\n')),(0,r.kt)("p",null,"As highlighted in the JSON above, the layout field serves as a composition context. It supports keys like:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"sources: to include third-party libraries (this can also be a pure JavaScript side-effect script)"),(0,r.kt)("li",{parentName:"ul"},"content: to design the layout using an HTML-like JSON configuration, as discussed in ",(0,r.kt)("a",{parentName:"li",href:"/docs/compose-your-frontend/how-to-compose"},"step 1"))),(0,r.kt)("p",null,"Let's now explore the custom web component ",(0,r.kt)("a",{parentName:"p",href:"https://docs.mia-platform.eu/docs/business_suite/backoffice/components/misc#bk-layout"},(0,r.kt)("inlineCode",{parentName:"a"},"bk-layout")),". The bk-layout is a sidebar + top bar menu component configurable in several ways via properties, such as:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The top-left logo image"),(0,r.kt)("li",{parentName:"ul"},"Sidebar menu items and their organization/grouping"),(0,r.kt)("li",{parentName:"ul"},"Login/logout menu"),(0,r.kt)("li",{parentName:"ul"},"And much more...")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "layout": {\n    "content": {\n      "tag": "bk-layout"\n    },\n    "sources": [\n      "https://cdn.jsdelivr.net/npm/@micro-lc/bk-web-components/1.3.18/dist/bk-web-components.esm.js"\n    ]\n  }\n}\n')),(0,r.kt)("p",null,"Upon applying this configuration, a blank sidebar menu with a top bar will surround the content area. Let's make some adjustments:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  ...,\n  "layout": {\n    "content": {\n      "tag": "bk-layout",\n      "properties": {\n        "logo": {\n          "url": "https://avatars.githubusercontent.com/u/92730708?s=200&v=4"\n        },\n        "menuItems": [\n          {\n            "id": "home",\n            "label": "Home",\n            "type": "application"\n          }\n        ]\n      }\n    },\n    "sources": [\n      "https://cdn.jsdelivr.net/npm/@micro-lc/bk-web-components/dist/bk-web-components.esm.js"\n    ]\n  }\n}\n')),(0,r.kt)("p",null,"Now, the logo appears, and a new item also shows up in the sidebar menu. The bk-layout utilizes the ",(0,r.kt)("micro-lc",null)," ",(0,r.kt)("a",{parentName:"p",href:"/api/micro-lc-api/routing"},"routing api"),' to activate the item with the "id" of "home" since it matches the application name:'),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("micro-lc",null)," is injected in every composition context and any custom webcomponent")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": 2,\n  "applications": {\n    \ud83d\udc47 this one\n    "home": {\n      ...\n    }\n  }\n  ...\n}\n')),(0,r.kt)(i.Fragment,null),(0,r.kt)("tutorial-frame",{configuration:{version:2,applications:{home:{integrationMode:"compose",route:"/",config:{content:{tag:"div",attributes:{style:"height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; row-gap: 24px; font-family: Arial;"},content:[{tag:"img",attributes:{alt:"logo",src:"https://cdn.jsdelivr.net/npm/@micro-lc/orchestrator/dist/favicon.png"}},{tag:"bk-button",properties:{content:"Go to official documentation",action:{type:"href",config:{href:"https://micro-lc.io/",target:"_blank"}}}}]},sources:["https://cdn.jsdelivr.net/npm/@micro-lc/bk-web-components/dist/bk-web-components.esm.js"]}}},layout:{content:{tag:"bk-layout",properties:{logo:{url:"https://avatars.githubusercontent.com/u/92730708?s=200&v=4"},menuItems:[{id:"home",label:"Home",type:"application"}]}},sources:["https://cdn.jsdelivr.net/npm/@micro-lc/bk-web-components/dist/bk-web-components.esm.js"]}}}),(0,r.kt)("p",null,"With that application currently mounted, bk-layout activates the corresponding menu entry. We'll discuss more about this later."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"While the sources field can point to any ESM library or IIFE library, be cautious. If different sources define the same web component tag, the page will malfunction \ud83d\ude22. This issue often arises when multiple versions of the same library are inadvertently included in the sources of different composition contexts.")),(0,r.kt)("h2",{id:"an-about-page"},"An About Page"),(0,r.kt)("p",null,"Although we haven't mounted multiple microfrontends yet, let's prepare for future steps by adding a new entry to the sidebar menu:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  ...,\n  "menuItems": [\n    {\n      "id": "home",\n      "label": "Home",\n      "type": "application"\n    },\n    {\n      "id": "about",\n      "label": "About",\n      "type": "application"\n    }\n  ]\n}\n')),(0,r.kt)("p",null,"This introduces two issues:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Clicking on About displays a prominent 404 page (though this was somewhat expected)."),(0,r.kt)("li",{parentName:"ul"},"Both Home and About share the same icon.")),(0,r.kt)("p",null,"The latter issue has a straightforward fix:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  ...,\n  "menuItems": [\n    {\n      "icon": {\n        "library": "@ant-design/icons-svg",\n        "selector": "HomeOutlined"\n      },\n      "id": "home",\n      "label": "Home",\n      "type": "application"\n    },\n    {\n      "icon": {\n        "library": "@ant-design/icons-svg",\n        "selector": "ContactsOutlined"\n      },\n      "id": "about",\n      "label": "About",\n      "type": "application"\n    }\n  ]\n}\n')),(0,r.kt)("p",null,"Now, it's time to dive into integrating microfrontends in the content area..."))}f.isMDXComponent=!0}}]);